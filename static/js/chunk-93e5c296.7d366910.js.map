{"version":3,"sources":["webpack:///./src/views/WriteView.vue?891f","webpack:///./src/views/WriteView.vue?03a1","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/readOnlyError.js","webpack:///src/views/WriteView.vue","webpack:///./src/views/WriteView.vue?53df","webpack:///./src/views/WriteView.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WriteView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WriteView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","_l","message","key","updateTime","attrs","msg","on","edit-block","editBlock","contenteditable","input","input_trigger","keydown","$event","type","indexOf","_k","keyCode","ctrlKey","shiftKey","altKey","metaKey","spark","staticRenderFns","_readOnlyError","name","Error","resetHeight","msgContainer","newHeight","parentElement","offsetHeight","nextSibling","style","height","scrollView","scrollTop","scrollHeight","clearTypeWriter","typeWriterContainer","innerText","WriteViewvue_type_script_lang_js_","components","MessageBlock","data","messages","input_text","msgToEdit","created","_this","db","getAllMessages","then","msgs","methods","$refs","_this2","push","newMsg","msgtoEdit","updateContent","updateMessage","setTimeout","content","views_WriteViewvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA6fE,EAAG,8CCAhgB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,cAAyB,CAAAF,EAAA,OAAYG,IAAA,eAAAD,YAAA,qBAAmDN,EAAAQ,GAAAR,EAAA,kBAAAS,GAAyC,OAAAL,EAAA,OAAiBM,IAAAD,EAAAE,YAAuB,CAAAP,EAAA,gBAAqBQ,MAAA,CAAOC,IAAAJ,GAAcK,GAAA,CAAKC,aAAAf,EAAAgB,cAA4B,KAAM,GAAAZ,EAAA,OAAeG,IAAA,sBAAAD,YAAA,wBAAAM,MAAA,CAAqEK,gBAAA,QAAyBH,GAAA,CAAKI,MAAAlB,EAAAmB,cAAAC,QAAA,SAAAC,GAAqD,OAAAA,EAAAC,KAAAC,QAAA,QAAAvB,EAAAwB,GAAAH,EAAAI,QAAA,WAAAJ,EAAAX,IAAA,SAAsF,KAAeW,EAAAK,QAAmCL,EAAAM,UAAAN,EAAAO,QAAAP,EAAAQ,QAAmD,KAAe7B,EAAA8B,MAAAT,GAAjF,cAC9oBU,EAAA,GCDe,SAAAC,EAAAC,GACf,UAAAC,MAAA,IAAAD,EAAA,wDCwBA,SAAAE,EAAAC,GACA,IAAAC,EACAD,EAAAE,cAAAC,aACAH,EAAAI,YAAAD,aAEAF,EAAA,KAEAL,EAAA,aAAAK,EAAA,IAEAD,EAAAK,MAAAC,OAAAL,EAAA,KAGA,SAAAM,EAAAP,GACAA,EAAAQ,UAAAR,EAAAS,aAGA,SAAAC,EAAAC,GACAA,EAAAC,UAAA,GAGA,IAAAC,EAAA,CACAC,WAAA,CACAC,eAAA,MAGAC,KALA,WAMA,OACAC,SAAA,GACAC,WAAA,GACAC,UAAA,OAGAC,QAZA,WAYA,IAAAC,EAAAxD,KACAyD,EAAA,KAAAC,iBAAAC,KAAA,SAAAC,GACAJ,EAAAJ,SAAAQ,KAGAC,QAAA,CACA3C,cADA,WAEAgB,EAAAlC,KAAA8D,MAAA3B,eAEAN,MAJA,WAIA,IAAAkC,EAAA/D,KACA,MAAAA,KAAAsD,UACAtD,KAAAoD,SAAAY,KACAP,EAAA,KAAAQ,OAAAjE,KAAA8D,MAAAhB,oBAAAC,aAGA/C,KAAAkE,UAAAC,cACAnE,KAAA8D,MAAAhB,oBAAAC,WAEAU,EAAA,KAAAW,cAAApE,KAAAsD,WACAtD,KAAAsD,UAAA,MAEAe,WAAA,kBAAA3B,EAAAqB,EAAAD,MAAA3B,eAAA,GACAU,EAAA7C,KAAA8D,MAAAhB,qBACAZ,EAAAlC,KAAA8D,MAAA3B,eAGApB,UArBA,SAqBAH,GACAZ,KAAA8D,MAAAhB,oBAAAC,UAAAnC,EAAA0D,QACAtE,KAAAsD,UAAA1C,KCrFmY2D,EAAA,0BCQnYC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAzE,EACAgC,GACF,EACA,KACA,KACA,MAIe6C,EAAA,WAAAH","file":"static/js/chunk-93e5c296.7d366910.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteView.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteView.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"write_view\"},[_c('div',{ref:\"msgContainer\",staticClass:\"message_container\"},_vm._l((_vm.messages),function(message){return _c('div',{key:message.updateTime},[_c('MessageBlock',{attrs:{\"msg\":message},on:{\"edit-block\":_vm.editBlock}})],1)}),0),_c('div',{ref:\"typeWriterContainer\",staticClass:\"type_writer_container\",attrs:{\"contenteditable\":\"true\"},on:{\"input\":_vm.input_trigger,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if(!$event.ctrlKey){ return null; }if($event.shiftKey||$event.altKey||$event.metaKey){ return null; }return _vm.spark($event)}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}","<template>\n  <div>\n    <div class=\"write_view\">\n      <div class=\"message_container\" ref=\"msgContainer\">\n        <div v-for=\"message in messages\" :key=\"message.updateTime\">\n          <MessageBlock :msg=\"message\" v-on:edit-block=\"editBlock\"></MessageBlock>\n        </div>\n      </div>\n      <div\n        class=\"type_writer_container\"\n        contenteditable=\"true\"\n        ref=\"typeWriterContainer\"\n        @input=\"input_trigger\"\n        @keydown.enter.ctrl.exact=\"spark\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MessageBlock from '../components/MessageBlock';\nimport db from '../storage/db.ts';\nimport Message from '../storage/message.ts';\n\n// import TypeWriter from './TypeWriter';\nfunction resetHeight(msgContainer) {\n    const newHeight =\n        msgContainer.parentElement.offsetHeight -\n        msgContainer.nextSibling.offsetHeight;\n    // newHeight is taken from the difference of parentElement (.write_view) and nextSibling (.type_writer_container)\n    if (newHeight < 10) {\n        // height is at least 10\n        newHeight = 10;\n    }\n    msgContainer.style.height = '' + newHeight + 'px';\n}\n\nfunction scrollView(msgContainer) {\n    msgContainer.scrollTop = msgContainer.scrollHeight;\n}\n\nfunction clearTypeWriter(typeWriterContainer) {\n    typeWriterContainer.innerText = '';\n}\n\nexport default {\n    components: {\n        MessageBlock,\n        // TypeWriter\n    },\n    data() {\n        return {\n            messages: [],\n            input_text: '',\n            msgToEdit: null,\n        };\n    },\n    created() {\n        db.getAllMessages().then((msgs) => {\n            this.messages = msgs;\n        });\n    },\n    methods: {\n        input_trigger() {\n            resetHeight(this.$refs.msgContainer);\n        },\n        spark() {\n            if (this.msgToEdit == null) {\n                this.messages.push(\n                    db.newMsg(this.$refs.typeWriterContainer.innerText),\n                );\n            } else {\n                this.msgtoEdit.updateContent(\n                    this.$refs.typeWriterContainer.innerText,\n                );\n                db.updateMessage(this.msgToEdit);\n                this.msgToEdit = null;\n            }\n            setTimeout(() => scrollView(this.$refs.msgContainer), 1); // TODO: should use nextTick\n            clearTypeWriter(this.$refs.typeWriterContainer);\n            resetHeight(this.$refs.msgContainer);\n            // resize after clearing\n        },\n        editBlock(msg) {\n            this.$refs.typeWriterContainer.innerText = msg.content;\n            this.msgToEdit = msg;\n        },\n    },\n};\n</script>\n\n<style>\nbody,\nhtml {\n    overflow: hidden;\n}\n.write_view {\n    overflow-y: auto;\n    max-width: 600px;\n    height: 100vh;\n    margin: 0 auto;\n}\n.message_container {\n    overflow-y: scroll;\n    height: 80vh;\n}\n.type_writer_container {\n    position: absolute;\n    width: 600px;\n    margin: 0 auto;\n    bottom: 0%;\n    display: block;\n    border: solid 1px black;\n    min-height: 20vh;\n}\n\n.typer {\n    position: absolute;\n    bottom: 5px;\n    box-sizing: border-box;\n    /* display: flex; */\n    align-items: center;\n    /* height: 4.9rem; */\n    width: 100%;\n    background-color: #fff;\n    box-shadow: 0 -5px 10px -5px rgba(0, 0, 0, 0.2);\n}\n.input {\n    /* position: absolute; */\n    /* left: 2.5rem; */\n    padding: 1rem;\n    width: 100%;\n    background-color: transparent;\n    border: none;\n    outline: none;\n    font-size: 1.25rem;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WriteView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WriteView.vue?vue&type=template&id=356213ae&\"\nimport script from \"./WriteView.vue?vue&type=script&lang=js&\"\nexport * from \"./WriteView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WriteView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}